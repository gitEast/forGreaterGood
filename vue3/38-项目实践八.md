<!--
 * @Author: East
 * @Date: 2021-12-08 11:16:58
 * @LastEditTime: 2021-12-08 19:28:39
 * @LastEditors: Please set LastEditors
 * @Description: 项目实践八
 * @FilePath: \forGreaterGood\vue3\38-项目实践八.md
-->

# 项目实践八

## 解决路由剩余问题

1. 刷新后，菜单未选中问题
   - 解决：menu 有 default-active 属性，是 menu-item 的 index
2. /main 时，其实是到第一个页面
   - 解决：在获取权限时，即获取第一个页面的路径

## 面包屑 breadcrumb

1. src/base-ui/breadcrumb/src/breadcrumb.vue + src/base-ui/breadcrumb/index.ts
2. 使用 el-breadcrumb + el-breadcrumb-item
3. IBreadcrumb { name: , path?: }
4. 拿取 breadcrumb 数组

   ```ts
   export function getBreadcrumbs(
     userMenus: any[],
     path: string
   ): IBreadcrumb[] {
     const crumbs: IBreadcrumb[] = [];

     // 递归获取面包屑的数组
     const _recurseGetMenu = (userMenus: any[]) => {
       for (const menu of userMenus) {
         if (menu.type === 1) {
           const realMenu = _recurseGetMenu(menu.children);
           if (realMenu) {
             crumbs.push({ name: menu.name });
             crumbs.push({ name: realMenu.name });
           }
         } else {
           if (menu.url === path) {
             return menu;
           }
         }
       }
     };

     _recurseGetMenu(userMenus);

     return crumbs;
   }
   ```

5. 需要使用 computed 响应式

## 封装响应式的 form

1. 方法一
   1. reactive(formData)
   2. `<east-form :formData="formData">`
   3. 配置文件字段加 field
   4. v-model
1. 组件的双向绑定，props 传入的是 modelValue
1. 使用 get 和 set
