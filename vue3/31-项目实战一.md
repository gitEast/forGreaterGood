<!--
 * @Author: East
 * @Date: 2021-11-24 14:42:01
 * @LastEditTime: 2021-11-24 18:03:11
 * @LastEditors: Please set LastEditors
 * @Description: 项目实战一：项目搭建规范
 * @FilePath: \forGreaterGood\vue3\31-项目实战一.md
-->
# 项目实战一：项目搭建规范
## 创建项目
1. `vue create vue3-ts-cms`
2. 手动选择(Manually select features)
   1. Choose Vue version
   2. Babel
   3. TypeScript
   4. Router(先不选，后期手动集成)
   5. Vuex(先不选，后期手动集成)
   6. CSS Pre-processors CSS 预处理器，处理 sass, less
   7. Lint / Formatter
3. 其他选择
   1. Vue version -- 3.x
   2. class-style component syntax?  n
   3. use Babel alongside TypeScript?  y
   4. CSS pre-processor?  Less
   5. a linter / formatter config?  Prettier
   6. lint features? Lint on save

## 代码规范
### EditorConfig
> 用于项目中规范每位成员的代码书写风格
VS Code 中安装插件 EditorConfig
```yaml
# .editorconfig 文件
# http://editorconfig.org

root = true

[*] # 所有文件都适用
charset = utf-8 # 设置文件字符集为 utf-8
indent_style = space # 缩进风格 tab | space
indent_size = 2 # 缩进大小
end_of_line = lf # 控制换行类型 lf | cr | crlf
trim_trailing_whitespace = true # 去除行首的任意空白字符
insert_final_newline = true # 始终在文件末行插入一个新行

[*.md] # 仅 md 文件适用以下规则
max_line_length = off
trim_trailing_whitespace = false
```

### prettier
> 代码格式化工具
VS Code 中安装插件 Prettier
1. `npm install prettier -D`： .bin 文件夹下多了个 prettier 的命令
2. 配置 .prettierrc 文件
   ```json
   {
      "useTabs": false,
      "tabWidth": 2,
      "printWidth": 80,
      "singleQuote": true,
      "trailingComma": "none",
      "semi": false
   }
   ```
   + useTabs：格式化成 tab 键还是 space
   + tabWidth：tab 是空格的情况下，几个空格？
   + printWidth：一行代码长度
   + singleQuote：单引号？
   + trailingComma：多行输入时，尾部是否添加逗号
3. 配置不使用 .prettierrc 的文件 .prettierignore
   ```yaml
   /dist/*
   .local
   .output.js
   /node_modules/**

   **/*.svg
   **/*.sh

   /public/*
   ```
4. 对 package.json 添加脚本 `"prettier": "prettier --write ."`
5. `npm run prettier`

### ESLint
> ESLint 与 Prettier 存在冲突
VS Code 中安装插件 ESLint
1. `npm install eslint-plugin-prettier eslint-config-prettier -D`：其实不用安装，已经安装过了
2. 对 .eslintrc.js 的 extends 部分添加 `'plugin:prettier/recommended'`

### git 相关规范
#### git Husky 和 git
> 防止仓库中有不符合规范的代码提交
+ 监听 `git commit` 命令，并拦截
+ husky 是一个 git hook 工具，可以帮助我们触发 git 提交的各个阶段：pre-commit, commit-msg, pre-push
1. `npx husky-init && npm install`
2. 在自动创建的 .husky/pre-commit 文件内修改命令 ` `npm run lint`

