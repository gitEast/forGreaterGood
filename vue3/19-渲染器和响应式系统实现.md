<!--
 * @Author: your name
 * @Date: 2021-11-14 10:44:07
 * @LastEditTime: 2021-11-14 12:39:22
 * @LastEditors: Please set LastEditors
 * @Description: Mini-Vue 中渲染器和响应式系统的实现
 * @FilePath: \vue3\19-渲染器和响应式系统实现.md
-->

# Mini-Vue 渲染器和响应式系统的实现

## 渲染器

- h 函数：返回一个 VNode 对象
- mount 函数：将 VNode 挂载到 DOM 上
- patch 函数：对新旧 VNode 进行对比，决定如何处理新的 VNode

## 响应式系统

### why Vue3 choose Proxy?

- Object.defineProperty 是劫持对象的属性，如果新增元素
  - 那么 Vue2 需要再次调用 defineProperty，而 Proxy 劫持的是整个对象，不需要做特殊处理
- 修改对象的不同
  - 使用 defineProperty 时，修改原来的 obj 对象即可触发拦截
  - 而使用 proxy，就必须修改代理对象，即 Proxy 的实例才能触发拦截
- Proxy 能观察的类型比 defineProperty 更丰富
  - has：in 操作符的捕捉器
  - deleteProperty： delete 操作符的捕捉器
  - 等等其他操作
- Proxy 作为新标准将受到浏览器厂商重点持续的性能优化
- 缺点：Proxy 不兼容 IE，也没有 polyfill、defineProperty 能支持到 IE9
