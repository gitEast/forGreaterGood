<!--
 * @Author: East
 * @Date: 2021-12-09 01:02:55
 * @LastEditTime: 2021-12-16 21:35:15
 * @LastEditors: Please set LastEditors
 * @Description: 队列结构
 * @FilePath: \forGreaterGood\algorithm\04-队列.md
-->

# 队列结构

## 认识队列结构

> 已经学习了一种受限的线性结构：栈结构。并且已经知道这种受限的数据结构对于解决某些特定的问题，会有特别的效果，接下来学习另外一个受限的数据结构：队列。

- 队列 Queue
  - 受限的线性表，先进先出(FIFO first in first out)
  - 受限的地方
    - 只允许在表的前端(front)进行删除操作
    - 只允许在表的后端(rear)进行插入操作
- 生活模拟
  - 排队

## Queue 的应用

- 打印队列
  1. 有五份文档需要打印，这些文档会**按照次序**放入到**打印队列**中
  2. 打印机会依次从队列中取出文档，**优先放入的文档**，**优先被取出**，并且对该文档进行打印
  3. 以此类推，直到队列中不再有新的文档
- 线程队列
  1. 在开发中，为了让任务可以并行处理，通常会**开启多个线程**
  2. 但是，我们不能让大量的线程同时运行处理任务(占用过多的资源)
  3. 这个时候，如果有需要开启线程处理任务的情况，我们就会使用**线程队列**
  4. 线程队列会**按照次序**来启动线程，并且处理对应的任务

## 实现方案

1. 基于数组
2. 基于链表
   - 比数组更好

### 基于数组实现

1. 用函数实现
2. 分两部分
   - 属性
     1. `this.items = []`
   - 方法
     1. enqueue：
     2. dequeue: -- shift() ---- 删除时，后面所有的元素都要移动，所以 链表更好用
     3. front：查看前端元素，但并不删除
     4. isEmpty
     5. size
     6. toString

### 击鼓传花

> 击鼓传花是一个常见的面试算法题，使用队列可以非常方便地实现最终的结果

- 规则：
  1. 几个朋友一起玩一个游戏，围成一圈，开始数数，数到某个数字的人自动淘汰
  2. 最后剩下的这个人会获得胜利，请问最后剩下的是原来在哪一个位置上的人？
- 封装一个基于队列的函数

  - 参数：所有参与人的性命，基于的数字
  - 结果：最终剩下的一人的姓名

  ```js
  function passGame(nameList, num) {
    /* 1. 创建一个队列 */
    const queue = new Queue()
    /* 2. 将所有人依次加入到队列中 */
    nameList.forEach(name => {
      queue.enqueue(name)
    })
    /* 3. 开始数数字，
         3.1 不是 num 的时候，重新加入到队列的末尾
         3.2 是 num 的时候，将其从队列中删除
    */
    while(queue.size() > 1) {
      for (let i = 0, i < num - 1; i++) {
        queue.enqueue(queue.dequeue())
      }
      queue.dequeue()
    }

    return nameList.indexOf(queue.front())
  }
  ```

## 优先级队列

> 普通队列插入一个元素，数据会被放在后端，并且需要前面所有的元素都被处理完成后才会处理后面的数据。但优先级队列不同。

1. 优先级队列在插入一个元素时，会考虑该元素的优先级
2. 该元素需要与队列中的其他元素进行**优先级比较**
3. 比较完成后，可以得出这个元素在队列中的**正确位置**
4. 其他处理方式，和普通队列的处理方式一致

**注意点：**

- 每个元素不再只是一个数据，而是**包含数据的优先级**
- 在添加方式中，根据优先级放入正确的位置

### 优先级队列的应用

1. 机场登机顺序
   - 头等舱和商务舱乘客的优先级要高于经济舱的乘客
   - 在有些国家，老年人和孕妇(或带小孩的妇女)登机时也享有高于其他乘客的优先级
2. 医院的(急诊科)候诊室
   - 医生会优先处理病情比较严重的患者
   - 当然，一般情况下是按照排号的顺序
3. 计算机中，也可以通过优先级队列来重新排序队列中任务的顺序
   - 比如每个线程处理的任务重要性不同，我们可以通过优先级的大小，来决定该线程在队列中被处理的次序

### 优先级队列的实现

```js
function PriorityQueie() {
  // 1. 封装一个类：可以理解成内部类
  function QueueElement(element, priority) {
    // 1.1 保存数据项
    // 1.2 保存优先级
  }

  // 2. 内部属性 items

  // 3. 实现插入方法
  Priority.prototype.enqueue = function (element, priority) {
    // 3.1 根据 QueueElment 创建优先级队列的 item
    // 3.2 插入元素
    //    3.2.1 如果队列为空，则直接放入元素
    //    3.2.2 如果队列不为空，则将其优先级与队列中的元素的优先级进行比较，然后插入
  };
}
```
