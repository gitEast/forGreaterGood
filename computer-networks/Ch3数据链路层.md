<!--
 * @Author: East
 * @Date: 2022-03-19 20:47:18
 * @LastEditTime: 2022-03-20 12:02:33
 * @LastEditors: Please set LastEditors
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \forGreaterGood\computer-networks\Ch3数据链路层.md
-->

# 数据链路层

## 1. 数据链路层概述

### 1.1 名词解析

- 数据链路层在网络体系中所处的位置![图](./imgs/Ch3_%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%9C%A8%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E4%B8%AD%E6%89%80%E5%A4%84%E7%9A%84%E4%BD%8D%E7%BD%AE.png)
- 链路(Link) ：就是从一个结点到相邻结点的一段物理线路，而中间没有任何其他的交换结点
- 数据链路(Data Link)：指把实现通信协议的硬件和软件加到链路上，就构成了数据链路
- 帧：在数据链路层上传输的数据包，又称为帧。
  - 数据链路层以帧为单位传输和处理单位

### 1.2 数据链路层的三个重要问题

- 封装成帧 ![帧](./imgs/Ch3_%E5%B8%A7.png)
  1. 应用层协议数据单元
  2. 应用层协议数据单元 + 运输层协议首部
  3. 应用层协议数据单元 + 运输层协议首部 + 网络层协议首部
  4. 帧尾 + 应用层协议数据单元 + 运输层协议首部 + 网络层协议首部 + 帧头
- 差错检测
  1. 发送方在发送帧之前，基于待发送的数据和检错算法计算出**检错码**，并将其封装在帧尾
     - 以太网版本 2 的 MAC 帧的帧尾 是 4 字节的帧检验序列 FCS 字段
  2. 帧在传输过程中出现了误码
  3. 接收方接收到帧后，通过检错码和检错算法，可以判断出帧在传输过程中是否出现了误码
- 可靠传输

  - 接收方如果检测到误码，是不会接收该帧的，会将其丢弃
  - 如果数据链路层向其上层提供的是**不可靠服务**，那么丢弃就丢弃了，不会再有更多的措施
  - 如果数据链路层向其上层提供的是**可靠服务**，那么就需要其他措施，来确保接收方主机还可以收到被丢弃的这个帧的正确副本 - 即，尽管误码是不能完全避免的，但若能实现发送方发送什么，接收方就能收到什么，就称为可靠传输

### 1.3 使用广播信道的数据链路层(共享式局域网)

- 以上三个问题，是针对使用**点对点信道**的数据链路层来举例的，对于使用广播信道的数据链路层，还需要解决其他问题：
  - 编址问题：源地址 + 目的地址
  - 当总线上多台主机同时使用总线来传输帧时，传输信号就会产生碰撞
    - 以太网采用的协调方法是 使用一种特殊的协议 CSMA/CD
      - 载波监听
      - 多点接入
      - 碰撞检测

## 2. 封装成帧

![图解](./imgs/Ch3_%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7.png)

- 封装成帧：数据链路层将上层交付的协议数据单元添加帧头和帧尾使之成为帧
  - 帧头和帧尾中包含重要的控制信息
