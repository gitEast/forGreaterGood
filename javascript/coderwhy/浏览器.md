<!--
 * @Author: your name
 * @Date: 2021-11-12 20:03:52
 * @LastEditTime: 2021-11-13 22:08:41
 * @LastEditors: Please set LastEditors
 * @Description: 浏览器相关知识
 * @FilePath: \coderwhy\浏览器.md
-->

# 浏览器

## Cookie

### 认识 Cookie

- 类型为小型文本文件，某些网站为了辨别用户身份而存储在用户本地终端(Client Side)上的数据
  - 浏览器会在特定的情况下携带上 Cookie 来发送请求，可以通过 Cookie 来获取一些信息
- 总是保存在客户端中，按在客户端中的存储位置，分为
  - 内存 Cookie
    - 浏览器关闭时，Cookie 即消失
    - 没有设置过期时间，默认情况
  - 硬盘 Cookie
    - 有一个过期时间，用户手动清理或到期时才会被清理
    - 有设置过期时间，并且过期时间不为 0 或者 负数
- Response Header -- 服务器响应头自动携带
  - Set-Cookie
- Request Header -- 浏览器请求头
  - cookie

## 如何判断是内存 Cookie 还是 硬盘 Cookie

- 一种登录机制
- 与服务器关系更紧密，一般由服务器设计，浏览器自动带上
  - js 也可以操作

### Cookie 基本使用

- 老师的 cookie-server 代码

### 常见属性

- 生命周期
  - 默认情况下，内存 cookie 即 会话 cookie，在浏览器关闭时自动被删除
  - 通过设置 expires 或者 max-age 来设置过期时间
    - expires：Date.toUTCString()，格式为 `;expires=date-in-GMTString-
    - max-age：过期的秒钟
- 作用域
  - Domain：指定哪些主机可以接受 cookie
    - 如果不指定，默认 origin，不包括子域名
    - 如果指定，则包含子域名。如，Domain=mozilla.org，则 developer.mozilla.org 也包含 cookie
  - Path：指定主机下哪些路径可以接受 cookie

### 操作 cookie

- 拿不到 cookie
- 添加 cookie：`document.cookie="age=18"`
- 删除 cookie 做不到
  - 设置 cookie 过期：`document.cookie="name=why;max-age=0"`

### 缺点

1. cookie 会被附加到每一次的 http 请求中，有的时候不需要，会消耗用户流量
2. 明文传输
3. 大小限制：4kb
4. cookie 验证登录：客户端携带 cookie
   - 浏览器：会自带，但其他客户端不带
   - iOS
   - 小程序
   - ...

## BOM Browser Object Model

> JavaScript 有一个非常重要的运行环境——浏览器，浏览器本身又作为一个应用程序需要对其本身进行操作，所以通常浏览器会有对象模型——BOM (浏览器对象模型)

### 认识 BOM

- 浏览器本身也是一种软件

* 可以将 BOM 看成是连接 JavaScript 脚本和浏览器窗口的桥梁
* 主要包括的对象模型
  - window
  - location
  - history
  - document

#### window

- window 对象在浏览器中有两个身份
  - 身份一：全局对象
    - GO root object
  - 身份二：浏览器窗口对象
- window 窗口对象 ---- 身负重担
  - 大量的属性：60 多个，localStorage、console、location、history、screenX，scrollX...
  - 大量的方法：alert、close、scrollTo、open...
  - 大量的事件：focus、blur、load、hashchange...
  - 包含从 EventTarget 继承过来的方法

#### history

- history.pushState({name: ''}, title, path)
  - title 被忽略，写 `""` 即可
  - 不请求新资源，前端路由会监听路由变化，去请求组件

## DOM
