<!--
 * @Author: your name
 * @Date: 2021-10-22 21:07:41
 * @LastEditTime: 2021-10-23 12:03:21
 * @LastEditors: Please set LastEditors
 * @Description: 继承
 * @FilePath: \知识点\对象-函数-原型.md
-->

# 继承的实现

## 原型式继承函数

- 提出者：道格拉斯·克罗克福德《JavaScript 悟道》

* 实现：达到效果 ---- info 的原型指向 obj

  - 现在的模拟

    ```js
    const obj = {
      name: "why",
      age: 18,
    };

    function createObject(o) {
      const newObj = {};
      Object.setPrototypeOf(newObj, o); // 设置原型

      return newObj;
    }

    const info = createObject(obj);
    ```

  - 实际实现 ---- 当时 Object.setPrototypeOf()方法不存在

    ```js
    const obj = {
      name: "why",
      age: 18,
    };

    function createObject(o) {
      function Fn() {}
      Fn.prototype = o;
      const newObj = new Fn();

      return newObj;
    }

    const info = createObject(obj);
    ```

  - 极简实现

    ```js
    const obj = {
      name: "why",
      age: 18,
    };

    const info = Object.create(obj);
    ```

## 寄生式继承

- 好家伙，又是**道格拉斯**提出来的
- 实现

  ```js
  const person = {
    running: function () {
      console.log("running");
    },
  };

  const student = Object.create(person);
  student.name = "why";
  student.studying = function () {
    console.log("studying");
  };
  // 如果创建一百个学生，则79-82行的代码需要重复一百次
  // 改进 ---- 使用函数
  function createStudent(person, name) {
    const stu = Object.create(person);
    stu.name = name;
    stu.studying = function () {
      console.log("studying");
    };

    return stu;
  }
  const stu1 = createStudent(person, "why");
  ```

## 最终方案：寄生组合式继承

```js
function Person(name, age, friends) {
  this.name = name;
  this.age = age;
  this.friends = friends;
}
Person.prototype.running = function () {
  console.log("running");
};
Person.prototype.eating = function () {
  console.log("eating");
};

function Student(name, age, friends, sno, score) {
  Person.call(this, name, age, friends);
  this.sno = sno;
  this.score = score;
}
Student.prototype = Object.create(Person.prototype); // Student的原型为一个Person实例
Object.defineProperty(Student.prototype, "constructor", {
  enumerable: false,
  configurable: true,
  writable: true,
  value: Student,
});
Student.prototype.studying = function () {
  console.log("studying");
};
```

- 优化 ---- 实现一个工具函数：117-123 行代码的封装
  ```js
  function inheritPrototype(son, fathter) {
    son.prototype = Object.create(fathter.prototype);
    Object.defineProperty(son.prototype, "constructor", {
      enumerable: false,
      configurable: true,
      writable: true,
      value: son,
    });
  }
  ```

## Js原型的补充

## 原型继承关系

