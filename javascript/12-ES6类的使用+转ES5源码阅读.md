<!--
 * @Author: East
 * @Date: 2022-01-10 20:32:52
 * @LastEditTime: 2022-01-10 21:42:00
 * @LastEditors: Please set LastEditors
 * @Description: ES6 类的使用 和 其转 ES5 源码阅读
 * @FilePath: \forGreaterGood\javascript\12-ES6类的使用+转ES5源码阅读.md
-->

# ES6 类的使用 和 其转 ES5 源码阅读

> 类 是 函数的语法糖

## 一、类 class

### 1. 认识 class 定义类

- 按照前面构造函数形式创建类，不仅和**编写普通的函数**过于相似，而且**代码并不容易理解**(不是大家都学得这么深入 der！(●ˇ∀ˇ●))
  - ES6 标准中使用了 `class` 关键字来直接定义类
  - 但类的本质依然是前面所讲的**构造函数、原型链的语法糖**而已

1. 定义类的方式
   - 类的声明
     ```js
     class Person {}
     ```
   - 类的表达式
     ```js
     var Person = {};
     ```
2. 特性

   ```js
   class Person {}

   console.log(Person.prototype); // {}
   console.log(Person.prototype.__proto__); // [Object: null prototype] {}
   console.log(Person.prototype.constructor); // [class Person]
   console.log(typeof Person); // 'function' 因为 typeof 返回的就那几个固定值

   const p = new Person();
   console.log(p.__proto__ === Person.prototype); // true
   ```

3. 类的构造方法
   ```js
   class Person {
     // 类的构造函数
     constructor(name, age) {
       this.name = name;
       this.age = age;
     }
   }
   ```
   1. 一个类只能有一个构造函数，如果包含多个，会抛出异常
   2. 对象创建过程：
      1. 在内存中创建一个对象 `moni = {}`
      2. 将类的原型 `prototype` 赋值给创建出来的对象 `moni.__proto__ = Person.prototype`
      3. 将对象赋值给函数的 `this`：new 绑定 `this = moni`
      4. 执行函数体中的代码
      5. 自动返回创建出来的对象
4. 类的方法

   ```js
   class Person {
     constructor(name, age, address) {
       this.name = name;
       this.age = age;
       this._address = address;
     }

     /* 实例方法 */
     eating() {
       console.log(this.name + " is eating...");
     }

     running() {
       console.log(this.name + " is running...");
     }

     /* 访问器方法 */
     get address() {
       return this._address;
     }
     set address(newVal) {
       this._address = newVal;
     }

     /* 类的静态方法(也叫类方法) */
     static randomPerson() {
       var names = ["east", "wind", "linda"];
       var index = Math.floor(Math.random() * persons.length);
       var age = Math.floor(Math.random() * 100);
       return new Person(names[index], age, "广州市");
     }
   }
   ```

5. 继承

   ```js
   class Person {}

   class Student extends Person {}
   ```
